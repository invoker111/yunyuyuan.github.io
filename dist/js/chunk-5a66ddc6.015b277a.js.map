{"version":3,"sources":["webpack:///./src/image/default-cover.png","webpack:///./src/views/backend/MdDetail.vue?4cae","webpack:///./src/views/backend/MdDetail.vue?b91b","webpack:///src/views/backend/MdDetail.vue","webpack:///./src/views/backend/MdDetail.vue?fbe0","webpack:///./src/views/backend/MdDetail.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","push","name","_v","showGuide","saving","nativeOn","save","getInfo","inputTitle","summary","inputSummary","cover","defaultCover","domProps","changeCover","_l","tags","tag","idx","key","class","editing","tagEditIndex","editTag","clickTrash","clickEdit","addTag","_s","parseTime","createTime","modifyTime","ref","style","width","mdWidth","startResize","doResize","htmlText","directives","rawName","value","expression","target","currentTarget","staticRenderFns","components","data","mdText","codeMirror","resizeStart","pos","size","newInfo","file","computed","id","$route","params","info","watch","methods","payload","e","splice","parseInt","span","getAttribute","$nextTick","parentElement","previousElementSibling","focus","input","length","startPos","$refs","text","querySelector","scrollWidth","newSize","parentWidth","component"],"mappings":"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","file":"js/chunk-5a66ddc6.015b277a.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/default-cover.6b0534ab.png\";","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@10.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MdDetail.vue?vue&type=style&index=0&id=59bec7e8&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@10.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MdDetail.vue?vue&type=style&index=0&id=59bec7e8&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"md-detail\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"operate\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"back\",attrs:{\"flex\":\"\"},on:{\"click\":function($event){return _vm.$router.push({name: 'backend.md'})}}},[_c('svg-icon',{attrs:{\"name\":'back'}}),_c('span',[_vm._v(\"返回\")])],1),_c('a',{attrs:{\"flex\":\"\"},on:{\"click\":function($event){_vm.showGuide = true}}},[_c('svg-icon',{attrs:{\"name\":'info'}}),_vm._v(\" markdown语法指南 \")],1),_c('loading-button',{attrs:{\"loading\":_vm.saving,\"text\":'上传',\"icon\":'save'},nativeOn:{\"click\":function($event){return _vm.save($event)}}})],1),_c('div',{staticClass:\"head\",attrs:{\"flex\":\"\"}},[_c('float-input',{attrs:{\"name\":'标题',\"size\":1.3,\"value\":_vm.getInfo()?_vm.getInfo().name:''},on:{\"input\":_vm.inputTitle}}),_c('float-input',{staticClass:\"summary\",attrs:{\"name\":'简介',\"size\":1,\"value\":_vm.getInfo()?_vm.getInfo().summary:''},on:{\"input\":_vm.inputSummary}})],1),_c('div',{staticClass:\"info\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"cover\"},[_c('img',{attrs:{\"src\":_vm.getInfo()?_vm.getInfo().cover: _vm.defaultCover}}),_c('label',[_c('span',[_vm._v(\"封面链接:\")]),_c('input',{domProps:{\"value\":_vm.getInfo()?_vm.getInfo().cover: ''},on:{\"focusout\":_vm.changeCover}})])]),_c('div',{staticClass:\"tags-time\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"tags\",attrs:{\"flex\":\"\"}},[_c('span',{staticClass:\"tag-icon\"},[_c('svg-icon',{attrs:{\"name\":'tag'}})],1),_vm._l((_vm.getInfo()?_vm.getInfo().tags:[]),function(tag,idx){return _c('div',{key:tag,class:{editing: _vm.tagEditIndex===idx}},[_c('input',{attrs:{\"disabled\":_vm.tagEditIndex!==idx,\"data-old\":tag,\"data-idx\":idx},domProps:{\"value\":tag},on:{\"focusout\":_vm.editTag}}),_c('div',{attrs:{\"flex\":\"\"}},[_c('span',{attrs:{\"title\":\"删除\"},on:{\"click\":function($event){return _vm.clickTrash(idx)}}},[_c('svg-icon',{attrs:{\"name\":'trash'}})],1),_c('span',{attrs:{\"data-idx\":idx,\"title\":\"编辑\"},on:{\"click\":_vm.clickEdit}},[_c('svg-icon',{attrs:{\"name\":'edit'}})],1)])])}),_c('span',{staticClass:\"add\",attrs:{\"title\":\"添加标签\"},on:{\"click\":_vm.addTag}},[_c('svg-icon',{attrs:{\"name\":'add'}})],1)],2),_c('div',{staticClass:\"time\",attrs:{\"flex\":\"\"}},[_c('span',[_c('span',[_vm._v(\"创建:\")]),_vm._v(_vm._s(_vm.parseTime(_vm.getInfo() ? _vm.getInfo().createTime : 0)))]),_c('span',[_c('span',[_vm._v(\"修改:\")]),_vm._v(_vm._s(_vm.parseTime(_vm.getInfo() ? _vm.getInfo().modifyTime : 0)))])])])]),_c('div',{ref:\"text\",staticClass:\"text\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"markdown\",style:({width: _vm.mdWidth}),attrs:{\"flex\":\"\"}},[_c('div',{ref:\"textarea\",staticClass:\"textarea\"})]),_c('resizer',{attrs:{\"orient\":'h'},on:{\"start\":_vm.startResize,\"resize\":_vm.doResize}}),_c('div',{staticClass:\"html\",attrs:{\"flex\":\"\"}},[_c('span',{staticClass:\"--markdown\",domProps:{\"innerHTML\":_vm._s(_vm.htmlText)}})])],1),_c('markdown-help',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showGuide),expression:\"showGuide\"}],nativeOn:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }_vm.showGuide=false}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"md-detail\" flex>\n    <div class=\"operate\" flex>\n      <div class=\"back\" @click=\"$router.push({name: 'backend.md'})\" flex=\"\">\n        <svg-icon :name=\"'back'\"/>\n        <span>返回</span>\n      </div>\n      <a @click=\"showGuide = true\" flex>\n        <svg-icon :name=\"'info'\"/>\n        markdown语法指南\n      </a>\n      <loading-button :loading=\"saving\" :text=\"'上传'\" :icon=\"'save'\" @click.native=\"save\"/>\n    </div>\n    <div class=\"head\" flex>\n      <float-input @input=\"inputTitle\" :name=\"'标题'\" :size=\"1.3\" :value=\"getInfo()?getInfo().name:''\"/>\n      <float-input class=\"summary\" @input=\"inputSummary\" :name=\"'简介'\" :size=\"1\"\n                   :value=\"getInfo()?getInfo().summary:''\"/>\n    </div>\n    <div class=\"info\" flex>\n      <div class=\"cover\">\n        <img :src=\"getInfo()?getInfo().cover: defaultCover\"/>\n        <label>\n          <span>封面链接:</span>\n          <input :value=\"getInfo()?getInfo().cover: ''\" @focusout=\"changeCover\"/>\n        </label>\n      </div>\n      <div class=\"tags-time\" flex>\n        <div class=\"tags\" flex>\n          <span class=\"tag-icon\">\n            <svg-icon :name=\"'tag'\"/>\n          </span>\n          <div v-for=\"(tag, idx) in getInfo()?getInfo().tags:[]\" :class=\"{editing: tagEditIndex===idx}\" :key=\"tag\">\n            <input :disabled=\"tagEditIndex!==idx\" @focusout=\"editTag\" :data-old=\"tag\" :data-idx=\"idx\" :value=\"tag\"/>\n            <div flex=\"\">\n              <span @click=\"clickTrash(idx)\" title=\"删除\">\n                <svg-icon :name=\"'trash'\"/>\n              </span>\n              <span @click=\"clickEdit\" :data-idx=\"idx\" title=\"编辑\">\n                <svg-icon :name=\"'edit'\"/>\n              </span>\n            </div>\n          </div>\n          <span class=\"add\" @click=\"addTag\" title=\"添加标签\">\n            <svg-icon :name=\"'add'\"/>\n          </span>\n        </div>\n        <div class=\"time\" flex>\n          <span><span>创建:</span>{{ parseTime(getInfo() ? getInfo().createTime : 0) }}</span>\n          <span><span>修改:</span>{{ parseTime(getInfo() ? getInfo().modifyTime : 0) }}</span>\n        </div>\n      </div>\n    </div>\n    <div class=\"text\" flex ref=\"text\">\n      <div class=\"markdown\" :style=\"{width: mdWidth}\" flex>\n        <div ref=\"textarea\" class=\"textarea\"></div>\n      </div>\n      <resizer :orient=\"'h'\" @start=\"startResize\" @resize=\"doResize\"/>\n      <div class=\"html\" flex>\n        <span class=\"--markdown\" v-html=\"htmlText\"></span>\n      </div>\n    </div>\n    <markdown-help v-show=\"showGuide\" @click.native.self=\"showGuide=false\"/>\n  </div>\n</template>\n\n<script>\nimport {staticFolder} from \"@/main\";\nimport {getText, parseAjaxError, parseMarkdown, parseTime} from \"@/utils\";\nimport {mapState} from 'vuex'\nimport FloatInput from \"@/components/FloatInput\";\n\nimport LoadingButton from \"@/components/LoadingButton\";\n\nimport defaultCover from '@/image/default-cover.png';\n\n\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/markdown/markdown';\n\nimport 'codemirror/lib/codemirror.css';\nimport '@/assets/style/code-mirror/codeMirror.scss';\n\nimport '@/assets/style/code-mirror/light-markdown.scss';\nimport '@/assets/style/code-mirror/dracula-markdown.scss';\nimport Resizer from \"@/components/Resizer\";\nimport MarkdownHelp from \"@/views/block/MarkdownHelp\";\n\nexport default {\n  name: \"MdDetail\",\n  components: {MarkdownHelp, Resizer, LoadingButton, FloatInput},\n  data() {\n    return {\n      defaultCover,\n      showGuide: false,\n      tagEditIndex: -1,\n      mdText: '',\n      codeMirror: null,\n      mdWidth: '40%',\n      resizeStart: {\n        pos: false,\n        size: false\n      },\n      saving: false,\n      newInfo: {\n        name: \"编辑标题\",\n        file: \"\",\n        cover: \"\",\n        createTime: \"\",\n        modifyTime: \"\",\n        summary: \"编辑简介\",\n        tags: []\n      },\n    }\n  },\n  computed: {\n    ...mapState(['gitUtil', 'config']),\n    id() {\n      return this.$route.params.id\n    },\n    info() {\n      for (let i of this.config.md) {\n        if (i.file === this.id) {\n          return i\n        }\n      }\n    },\n    htmlText() {\n      return parseMarkdown(this.mdText)\n    }\n  },\n  async mounted() {\n    await this.init()\n  },\n  watch: {\n    async $route() {\n      await this.init()\n    }\n  },\n  methods: {\n    async init() {\n      this.mdText = '';\n      if (this.$route.name === 'backend.md.detail') {\n        // 标题\n        document.title = '后台-文章-' + this.id;\n        if (this.$route.params.id !== 'new') {\n          await this.getMdText()\n        }\n      }\n      if (!this.codeMirror) {\n        this.codeMirror = new CodeMirror(this.$refs.textarea, {\n          indentUnit: 2,\n          tabSize: 2,\n          theme: 'dracula',\n          lineNumbers: true,\n          line: true,\n          mode: 'markdown',\n        });\n        this.codeMirror.on('change', () => {\n          this.mdText = this.codeMirror.getValue()\n        });\n        this.codeMirror.setValue(this.mdText);\n      }\n    },\n    async getMdText() {\n      let res = await getText(`${staticFolder}/md/${this.id}/index.md`);\n      if (res[0]) {\n        this.mdText = res[1];\n      } else {\n        this.$message.error(parseAjaxError(res[1]))\n      }\n    },\n    getInfo() {\n      return this.id === 'new' ? this.newInfo : this.info;\n    },\n    parseTime(t) {\n      return parseTime(t, true)\n    },\n\n    inputTitle(payload) {\n      let info = this.getInfo();\n      info.name = payload[1]\n    },\n    inputSummary(payload) {\n      let info = this.getInfo();\n      info.summary = payload[1]\n    },\n    changeCover(e) {\n      let info = this.getInfo();\n      info.cover = e.target.value;\n    },\n    clickTrash(idx) {\n      let info = this.getInfo();\n      info.tags.splice(idx, 1)\n    },\n    clickEdit(e) {\n      let span = e.currentTarget;\n      this.tagEditIndex = parseInt(span.getAttribute('data-idx'));\n      this.$nextTick(() => {\n        span.parentElement.previousElementSibling.focus()\n      })\n    },\n    editTag(e) {\n      let info = this.getInfo(),\n          input = e.target;\n      this.tagEditIndex = -1;\n      for (let i of info.tags) {\n        if (i !== input.getAttribute('data-old') && i === input.value) {\n          return this.$message.warning('标签不能重复!');\n        }\n      }\n      info.tags.splice(parseInt(input.getAttribute('data-idx')), 1, input.value);\n    },\n    addTag() {\n      let info = this.getInfo();\n      info.tags.push('输入标签' + info.tags.length)\n    },\n    startResize (startPos){\n      this.resizeStart = {\n        pos: startPos,\n        size: this.$refs.text.querySelector('.markdown').scrollWidth\n      };\n    },\n    doResize (delta){\n      let parentWidth = this.$refs.text.scrollWidth;\n      let newSize = this.resizeStart.size + (delta-this.resizeStart.pos);\n      if (newSize > parentWidth/5 && newSize < parentWidth*4/5){\n        this.mdWidth = `${newSize}px`;\n      }\n    },\n    async save() {\n      if (this.saving) return;\n      if (this.gitUtil) {\n        let info = this.getInfo();\n        if (!info.name || !info.summary || !info.tags.length || !info.cover) {\n          return this.$message.warning('标题,简介,标签和封面均不能为空!')\n        }\n        this.saving = true;\n        let folderId = new Date().getTime();\n        info.modifyTime = folderId;\n        if (this.id !== 'new') {\n          // 更新\n          folderId = this.id;\n        } else {\n          // 添加\n          // config md +1\n          info.file = folderId.toString();\n          info.createTime = folderId;\n          let mdList = this.config.md;\n          mdList.push(JSON.parse(JSON.stringify(info)));\n        }\n        // 执行更新\n        // 更新config.json\n        let res = await this.gitUtil.updateConfig(this.config);\n        if (res[0]) {\n          // 更新 md 和 html文件\n          let res = await this.gitUtil.updateMd({\n            folder: folderId,\n            md: this.mdText,\n            html: this.htmlText\n          });\n          if (res[0]) {\n            this.$message.success('上传成功!');\n            this.$router.push({name: 'backend.md'})\n          } else {\n            this.$message.error(parseAjaxError(res[1]))\n          }\n        } else {\n          this.$message.error(parseAjaxError(res[1]))\n        }\n        this.saving = false\n      } else {\n        this.$message.warning('请先登录!');\n        this.$emit('login')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.md-detail {\n  flex-direction: column;\n  background: white;\n  width: 95%;\n  margin: 0.8rem auto 0 auto;\n  border-radius: 0.6rem;\n  box-shadow: 0 0 2rem rgba(0, 0, 0, 0.5);\n  position: relative;\n\n  > .operate {\n    margin-bottom: 1rem;\n    justify-content: space-between;\n    width: calc(100% - 0.5rem);\n    padding: 0.2rem;\n\n    > .back {\n      cursor: pointer;\n      padding: 0.4rem 0.8rem;\n      border-radius: 0.2rem;\n      box-shadow: 0 0 0.4rem rgba(0, 0, 0, 0.3);\n      justify-content: center;\n      background: #ff8595;\n      transition: all .15s linear;\n\n      &:hover {\n        background: #ee647e;\n      }\n\n      > svg {\n        width: 1.4rem;\n        height: 1.4rem;\n      }\n\n      > span {\n        font-size: 0.9rem;\n        margin-left: 0.5rem;\n      }\n    }\n\n    > a {\n      font-size: 0.9rem;\n      cursor: pointer;\n\n      &:hover {\n        color: #ff3c00;\n        text-decoration: underline;\n\n        > svg {\n          fill: #ff3c00;\n        }\n      }\n\n      > svg {\n        width: 1.2rem;\n        height: 1.2rem;\n        margin-right: 0.8rem;\n      }\n    }\n\n    > ::v-deep .loading-button {\n      padding: 0.4rem 0.8rem;\n      background: #66dded;\n      box-shadow: 0 0 0.3rem #00000078;\n      color: black;\n\n      &:not(.loading):hover {\n        background: #62c7db;\n      }\n\n      &.loading {\n        background: gray;\n        color: white;\n      }\n    }\n  }\n\n  > .head {\n    flex-direction: column;\n    margin: 3rem 0;\n    width: 100%;\n\n    > .float-input {\n      width: 60%;\n\n      ::v-deep input {\n        text-align: center !important;\n      }\n\n      &.summary {\n        margin-top: 3rem;\n        width: 70%;\n      }\n    }\n  }\n\n  > .info {\n    width: 100%;\n    justify-content: space-around;\n    align-items: stretch;\n\n    > .cover {\n      margin: 0 2rem;\n      border-radius: 0.8rem;\n      padding: 0.5rem;\n      justify-content: space-around;\n      flex-direction: column;\n      border: 1px solid gray;\n      box-shadow: 0 0 0.8rem rgba(0, 0, 0, 0.15);\n\n      > img {\n        width: 20rem;\n        height: 15rem;\n        object-fit: contain;\n        border-radius: inherit;\n      }\n\n      > label {\n        display: flex;\n        align-items: center;\n        margin: 1rem 0 0.5rem 0;\n\n        > span {\n          font-size: 0.88rem;\n          margin-right: 0.5rem;\n        }\n\n        > input {\n          border: 1px solid gray;\n          padding: 0.15rem;\n          font-size: 0.95rem;\n        }\n      }\n    }\n\n    > .tags-time {\n      flex-direction: column;\n      flex-grow: 1;\n\n      > .tags {\n        align-content: start;\n        flex-wrap: wrap;\n\n        > .tag-icon {\n          margin-right: 2rem;\n          display: flex;\n          align-items: center;\n\n          > svg {\n            width: 2.6rem;\n            height: 2.6rem;\n          }\n        }\n\n        > div {\n          margin: 1rem 0.8rem;\n          border-radius: 0.2rem;\n          justify-content: center;\n          position: relative;\n          height: 2.5rem;\n          box-shadow: 0 0 0.6rem rgba(0, 0, 0, 0.26);\n\n          > input {\n            font-size: 0.96rem;\n            width: 12rem;\n            height: 100%;\n            border-radius: inherit;\n            text-align: center;\n            background: white;\n            color: black;\n            border: 1px solid gray;\n            transition: all .2s linear;\n\n            &:disabled {\n              color: white;\n              width: 6rem;\n              background: #3e41ff;\n              border-color: transparent;\n            }\n          }\n\n          > div {\n            display: none;\n            position: absolute;\n            border-radius: inherit;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            justify-content: space-around;\n            background: rgba(0, 0, 0, 0.4);\n\n            > span {\n              cursor: pointer;\n              padding: 0.15rem 0.4rem;\n              border-radius: 0.2rem;\n\n              &:hover {\n                background: rgba(255, 255, 255, 0.31);\n              }\n\n              > svg {\n                width: 1.4rem;\n                height: 1.4rem;\n              }\n            }\n          }\n\n          &:not(.editing):hover {\n            > div {\n              display: flex;\n            }\n          }\n        }\n\n        > .add {\n          cursor: pointer;\n          padding: 0.5rem;\n          border-radius: 50%;\n          background: #ffc722;\n          justify-content: center;\n          display: flex;\n          align-items: center;\n          margin-left: 1rem;\n          box-shadow: 0 0 0.4rem rgba(0, 0, 0, 0.3);\n\n          &:hover {\n            background: #eab61f;\n          }\n\n          > svg {\n            width: 1.2rem;\n            height: 1.2rem;\n            fill: white;\n          }\n        }\n      }\n\n      > .time {\n        width: 100%;\n        height: 3rem;\n        justify-content: space-around;\n        margin-top: auto;\n\n        > span {\n          color: #0003ff;\n          font-size: 0.9rem;\n\n          > span {\n            font-size: 0.9em;\n            color: black;\n            margin-right: 0.5rem;\n          }\n        }\n      }\n    }\n  }\n\n  > .text {\n    margin: 1rem 0 0.4rem 0;\n    width: 99%;\n    max-height: 50rem;\n    min-height: 10rem;\n    align-items: stretch;\n    border: 1px solid #656565;\n\n    > .markdown {\n      align-items: stretch;\n      flex-shrink: 0;\n\n      > .textarea {\n        width: 100%;\n\n        > ::v-deep .CodeMirror {\n          height: 100%;\n          font-size: 0.9rem;\n        }\n      }\n    }\n    > ::v-deep .resizer{\n      background: #828282;\n      width: 0.3rem;\n      flex-shrink: 0;\n      &[resizing]{\n        background: #505050;\n      }\n    }\n    > .html {\n      overflow-y: auto;\n      display: block;\n      flex-grow: 1;\n\n      > span {\n        display: block;\n        word-break: break-all;\n        white-space: pre-line;\n        width: 100%;\n      }\n    }\n  }\n\n}\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MdDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MdDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MdDetail.vue?vue&type=template&id=59bec7e8&scoped=true&\"\nimport script from \"./MdDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./MdDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MdDetail.vue?vue&type=style&index=0&id=59bec7e8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59bec7e8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}