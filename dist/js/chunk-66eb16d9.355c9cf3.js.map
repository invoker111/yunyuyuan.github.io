{"version":3,"sources":["webpack:///./src/image/default-cover.png","webpack:///./src/views/backend/MdDetail.vue?67b5","webpack:///./src/views/backend/MdDetail.vue?7898","webpack:///src/views/backend/MdDetail.vue","webpack:///./src/views/backend/MdDetail.vue?fbe0","webpack:///./src/views/backend/MdDetail.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","push","name","_v","showGuide","saving","nativeOn","save","getInfo","inputTitle","summary","inputSummary","cover","defaultCover","domProps","changeCover","_l","tags","tag","idx","key","class","editing","tagEditIndex","editTag","clickTrash","clickEdit","addTag","_s","parseTime","createTime","modifyTime","ref","style","width","mdWidth","startResize","doResize","htmlText","directives","rawName","value","expression","target","currentTarget","staticRenderFns","components","data","mdText","codeMirror","resizeStart","pos","size","newInfo","file","computed","id","$route","params","info","watch","methods","payload","e","splice","parseInt","span","getAttribute","$nextTick","parentElement","previousElementSibling","focus","input","length","startPos","$refs","text","querySelector","scrollWidth","newSize","parentWidth","component"],"mappings":"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","file":"js/chunk-66eb16d9.355c9cf3.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/default-cover.6b0534ab.png\";","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@10.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MdDetail.vue?vue&type=style&index=0&id=9448e2fa&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@10.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MdDetail.vue?vue&type=style&index=0&id=9448e2fa&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"md-detail\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"operate\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"back\",attrs:{\"flex\":\"\"},on:{\"click\":function($event){return _vm.$router.push({name: 'backend.md'})}}},[_c('svg-icon',{attrs:{\"name\":'back'}}),_c('span',[_vm._v(\"返回\")])],1),_c('a',{attrs:{\"flex\":\"\"},on:{\"click\":function($event){_vm.showGuide = true}}},[_c('svg-icon',{attrs:{\"name\":'info'}}),_vm._v(\" markdown语法指南 \")],1),_c('loading-button',{attrs:{\"loading\":_vm.saving,\"text\":'上传',\"icon\":'save'},nativeOn:{\"click\":function($event){return _vm.save($event)}}})],1),_c('div',{staticClass:\"head\",attrs:{\"flex\":\"\"}},[_c('float-input',{attrs:{\"name\":'标题',\"size\":1.3,\"value\":_vm.getInfo()?_vm.getInfo().name:''},on:{\"input\":_vm.inputTitle}}),_c('float-input',{staticClass:\"summary\",attrs:{\"name\":'简介',\"size\":1,\"value\":_vm.getInfo()?_vm.getInfo().summary:''},on:{\"input\":_vm.inputSummary}})],1),_c('div',{staticClass:\"info\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"cover\"},[_c('img',{attrs:{\"src\":_vm.getInfo()?_vm.getInfo().cover: _vm.defaultCover}}),_c('label',[_c('span',[_vm._v(\"封面链接:\")]),_c('input',{domProps:{\"value\":_vm.getInfo()?_vm.getInfo().cover: ''},on:{\"focusout\":_vm.changeCover}})])]),_c('div',{staticClass:\"tags-time\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"tags\",attrs:{\"flex\":\"\"}},[_c('span',{staticClass:\"tag-icon\"},[_c('svg-icon',{attrs:{\"name\":'tag'}})],1),_vm._l((_vm.getInfo()?_vm.getInfo().tags:[]),function(tag,idx){return _c('div',{key:tag,class:{editing: _vm.tagEditIndex===idx}},[_c('input',{attrs:{\"disabled\":_vm.tagEditIndex!==idx,\"data-old\":tag,\"data-idx\":idx},domProps:{\"value\":tag},on:{\"focusout\":_vm.editTag}}),_c('div',{attrs:{\"flex\":\"\"}},[_c('span',{attrs:{\"title\":\"删除\"},on:{\"click\":function($event){return _vm.clickTrash(idx)}}},[_c('svg-icon',{attrs:{\"name\":'trash'}})],1),_c('span',{attrs:{\"data-idx\":idx,\"title\":\"编辑\"},on:{\"click\":_vm.clickEdit}},[_c('svg-icon',{attrs:{\"name\":'edit'}})],1)])])}),_c('span',{staticClass:\"add\",attrs:{\"title\":\"添加标签\"},on:{\"click\":_vm.addTag}},[_c('svg-icon',{attrs:{\"name\":'add'}})],1)],2),_c('div',{staticClass:\"time\",attrs:{\"flex\":\"\"}},[_c('span',[_c('span',[_vm._v(\"创建:\")]),_vm._v(_vm._s(_vm.parseTime(_vm.getInfo() ? _vm.getInfo().createTime : 0)))]),_c('span',[_c('span',[_vm._v(\"修改:\")]),_vm._v(_vm._s(_vm.parseTime(_vm.getInfo() ? _vm.getInfo().modifyTime : 0)))])])])]),_c('div',{ref:\"text\",staticClass:\"text\",attrs:{\"flex\":\"\"}},[_c('div',{staticClass:\"markdown\",style:({width: _vm.mdWidth}),attrs:{\"flex\":\"\"}},[_c('div',{ref:\"textarea\",staticClass:\"textarea\"})]),_c('resizer',{attrs:{\"orient\":'h'},on:{\"start\":_vm.startResize,\"resize\":_vm.doResize}}),_c('div',{staticClass:\"html\",attrs:{\"flex\":\"\"}},[_c('span',{staticClass:\"--markdown\",domProps:{\"innerHTML\":_vm._s(_vm.htmlText)}})])],1),_c('markdown-help',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showGuide),expression:\"showGuide\"}],nativeOn:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }_vm.showGuide=false}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"md-detail\" flex>\r\n    <div class=\"operate\" flex>\r\n      <div class=\"back\" @click=\"$router.push({name: 'backend.md'})\" flex=\"\">\r\n        <svg-icon :name=\"'back'\"/>\r\n        <span>返回</span>\r\n      </div>\r\n      <a @click=\"showGuide = true\" flex>\r\n        <svg-icon :name=\"'info'\"/>\r\n        markdown语法指南\r\n      </a>\r\n      <loading-button :loading=\"saving\" :text=\"'上传'\" :icon=\"'save'\" @click.native=\"save\"/>\r\n    </div>\r\n    <div class=\"head\" flex>\r\n      <float-input @input=\"inputTitle\" :name=\"'标题'\" :size=\"1.3\" :value=\"getInfo()?getInfo().name:''\"/>\r\n      <float-input class=\"summary\" @input=\"inputSummary\" :name=\"'简介'\" :size=\"1\"\r\n                   :value=\"getInfo()?getInfo().summary:''\"/>\r\n    </div>\r\n    <div class=\"info\" flex>\r\n      <div class=\"cover\">\r\n        <img :src=\"getInfo()?getInfo().cover: defaultCover\"/>\r\n        <label>\r\n          <span>封面链接:</span>\r\n          <input :value=\"getInfo()?getInfo().cover: ''\" @focusout=\"changeCover\"/>\r\n        </label>\r\n      </div>\r\n      <div class=\"tags-time\" flex>\r\n        <div class=\"tags\" flex>\r\n          <span class=\"tag-icon\">\r\n            <svg-icon :name=\"'tag'\"/>\r\n          </span>\r\n          <div v-for=\"(tag, idx) in getInfo()?getInfo().tags:[]\" :class=\"{editing: tagEditIndex===idx}\" :key=\"tag\">\r\n            <input :disabled=\"tagEditIndex!==idx\" @focusout=\"editTag\" :data-old=\"tag\" :data-idx=\"idx\" :value=\"tag\"/>\r\n            <div flex=\"\">\r\n              <span @click=\"clickTrash(idx)\" title=\"删除\">\r\n                <svg-icon :name=\"'trash'\"/>\r\n              </span>\r\n              <span @click=\"clickEdit\" :data-idx=\"idx\" title=\"编辑\">\r\n                <svg-icon :name=\"'edit'\"/>\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <span class=\"add\" @click=\"addTag\" title=\"添加标签\">\r\n            <svg-icon :name=\"'add'\"/>\r\n          </span>\r\n        </div>\r\n        <div class=\"time\" flex>\r\n          <span><span>创建:</span>{{ parseTime(getInfo() ? getInfo().createTime : 0) }}</span>\r\n          <span><span>修改:</span>{{ parseTime(getInfo() ? getInfo().modifyTime : 0) }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"text\" flex ref=\"text\">\r\n      <div class=\"markdown\" :style=\"{width: mdWidth}\" flex>\r\n        <div ref=\"textarea\" class=\"textarea\"></div>\r\n      </div>\r\n      <resizer :orient=\"'h'\" @start=\"startResize\" @resize=\"doResize\"/>\r\n      <div class=\"html\" flex>\r\n        <span class=\"--markdown\" v-html=\"htmlText\"></span>\r\n      </div>\r\n    </div>\r\n    <markdown-help v-show=\"showGuide\" @click.native.self=\"showGuide=false\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {staticFolder} from \"@/main\";\r\nimport {getText, parseAjaxError, parseMarkdown, parseTime} from \"@/utils\";\r\nimport {mapState} from 'vuex'\r\nimport FloatInput from \"@/components/FloatInput\";\r\n\r\nimport LoadingButton from \"@/components/LoadingButton\";\r\n\r\nimport defaultCover from '@/image/default-cover.png';\r\n\r\n\r\nimport CodeMirror from 'codemirror';\r\nimport 'codemirror/mode/markdown/markdown';\r\n\r\nimport 'codemirror/lib/codemirror.css';\r\nimport '@/assets/style/code-mirror/codeMirror.scss';\r\n\r\nimport '@/assets/style/code-mirror/light-markdown.scss';\r\nimport '@/assets/style/code-mirror/dracula-markdown.scss';\r\nimport Resizer from \"@/components/Resizer\";\r\nimport MarkdownHelp from \"@/views/block/MarkdownHelp\";\r\n\r\nexport default {\r\n  name: \"MdDetail\",\r\n  components: {MarkdownHelp, Resizer, LoadingButton, FloatInput},\r\n  data() {\r\n    return {\r\n      defaultCover,\r\n      showGuide: false,\r\n      tagEditIndex: -1,\r\n      mdText: '',\r\n      codeMirror: null,\r\n      mdWidth: '40%',\r\n      resizeStart: {\r\n        pos: false,\r\n        size: false\r\n      },\r\n      saving: false,\r\n      newInfo: {\r\n        name: \"编辑标题\",\r\n        file: \"\",\r\n        cover: \"\",\r\n        createTime: \"\",\r\n        modifyTime: \"\",\r\n        summary: \"编辑简介\",\r\n        tags: []\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['gitUtil', 'config']),\r\n    id() {\r\n      return this.$route.params.id\r\n    },\r\n    info() {\r\n      for (let i of this.config.md) {\r\n        if (i.file === this.id) {\r\n          return i\r\n        }\r\n      }\r\n    },\r\n    htmlText() {\r\n      return parseMarkdown(this.mdText)\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.init()\r\n  },\r\n  watch: {\r\n    async $route() {\r\n      await this.init()\r\n    }\r\n  },\r\n  methods: {\r\n    async init() {\r\n      this.mdText = '';\r\n      if (this.$route.name === 'backend.md.detail') {\r\n        // 标题\r\n        document.title = '后台-文章-' + this.id;\r\n        if (this.$route.params.id !== 'new') {\r\n          await this.getMdText()\r\n        }\r\n      }\r\n      if (!this.codeMirror) {\r\n        this.codeMirror = new CodeMirror(this.$refs.textarea, {\r\n          indentUnit: 2,\r\n          tabSize: 2,\r\n          theme: 'dracula',\r\n          lineNumbers: true,\r\n          line: true,\r\n          mode: 'markdown',\r\n        });\r\n        this.codeMirror.on('change', () => {\r\n          this.mdText = this.codeMirror.getValue()\r\n        });\r\n        this.codeMirror.setValue(this.mdText);\r\n      }\r\n    },\r\n    async getMdText() {\r\n      let res = await getText(`${staticFolder}/md/${this.id}/index.md`);\r\n      if (res[0]) {\r\n        this.mdText = res[1];\r\n      } else {\r\n        this.$message.error(parseAjaxError(res[1]))\r\n      }\r\n    },\r\n    getInfo() {\r\n      return this.id === 'new' ? this.newInfo : this.info;\r\n    },\r\n    parseTime(t) {\r\n      return parseTime(t, true)\r\n    },\r\n\r\n    inputTitle(payload) {\r\n      let info = this.getInfo();\r\n      info.name = payload[1]\r\n    },\r\n    inputSummary(payload) {\r\n      let info = this.getInfo();\r\n      info.summary = payload[1]\r\n    },\r\n    changeCover(e) {\r\n      let info = this.getInfo();\r\n      info.cover = e.target.value;\r\n    },\r\n    clickTrash(idx) {\r\n      let info = this.getInfo();\r\n      info.tags.splice(idx, 1)\r\n    },\r\n    clickEdit(e) {\r\n      let span = e.currentTarget;\r\n      this.tagEditIndex = parseInt(span.getAttribute('data-idx'));\r\n      this.$nextTick(() => {\r\n        span.parentElement.previousElementSibling.focus()\r\n      })\r\n    },\r\n    editTag(e) {\r\n      let info = this.getInfo(),\r\n          input = e.target;\r\n      this.tagEditIndex = -1;\r\n      for (let i of info.tags) {\r\n        if (i !== input.getAttribute('data-old') && i === input.value) {\r\n          return this.$message.warning('标签不能重复!');\r\n        }\r\n      }\r\n      info.tags.splice(parseInt(input.getAttribute('data-idx')), 1, input.value);\r\n    },\r\n    addTag() {\r\n      let info = this.getInfo();\r\n      info.tags.push('输入标签' + info.tags.length)\r\n    },\r\n    startResize (startPos){\r\n      this.resizeStart = {\r\n        pos: startPos,\r\n        size: this.$refs.text.querySelector('.markdown').scrollWidth\r\n      };\r\n    },\r\n    doResize (delta){\r\n      let parentWidth = this.$refs.text.scrollWidth;\r\n      let newSize = this.resizeStart.size + (delta-this.resizeStart.pos);\r\n      if (newSize > parentWidth/5 && newSize < parentWidth*4/5){\r\n        this.mdWidth = `${newSize}px`;\r\n      }\r\n    },\r\n    async save() {\r\n      if (this.saving) return;\r\n      if (this.gitUtil) {\r\n        let info = this.getInfo();\r\n        if (!info.name || !info.summary || !info.tags.length || !info.cover) {\r\n          return this.$message.warning('标题,简介,标签和封面均不能为空!')\r\n        }\r\n        this.saving = true;\r\n        let folderId = new Date().getTime();\r\n        info.modifyTime = folderId;\r\n        if (this.id !== 'new') {\r\n          // 更新\r\n          folderId = this.id;\r\n        } else {\r\n          // 添加\r\n          // config md +1\r\n          info.file = folderId.toString();\r\n          info.createTime = folderId;\r\n          let mdList = this.config.md;\r\n          mdList.push(JSON.parse(JSON.stringify(info)));\r\n        }\r\n        // 执行更新\r\n        // 更新config.json\r\n        let res = await this.gitUtil.updateConfig(this.config);\r\n        if (res[0]) {\r\n          // 更新 md 和 html文件\r\n          let res = await this.gitUtil.updateMd({\r\n            folder: folderId,\r\n            md: this.mdText,\r\n            html: this.htmlText\r\n          });\r\n          if (res[0]) {\r\n            this.$message.success('上传成功!');\r\n            this.$router.push({name: 'backend.md'})\r\n          } else {\r\n            this.$message.error(parseAjaxError(res[1]))\r\n          }\r\n        } else {\r\n          this.$message.error(parseAjaxError(res[1]))\r\n        }\r\n        this.saving = false\r\n      } else {\r\n        this.$message.warning('请先登录!');\r\n        this.$emit('login')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.md-detail {\r\n  flex-direction: column;\r\n  background: white;\r\n  width: 95%;\r\n  margin: 0.8rem auto 0 auto;\r\n  border-radius: 0.6rem;\r\n  box-shadow: 0 0 2rem rgba(0, 0, 0, 0.5);\r\n  position: relative;\r\n\r\n  > .operate {\r\n    margin-bottom: 1rem;\r\n    justify-content: space-between;\r\n    width: calc(100% - 0.5rem);\r\n    padding: 0.2rem;\r\n\r\n    > .back {\r\n      cursor: pointer;\r\n      padding: 0.4rem 0.8rem;\r\n      border-radius: 0.2rem;\r\n      box-shadow: 0 0 0.4rem rgba(0, 0, 0, 0.3);\r\n      justify-content: center;\r\n      background: #ff8595;\r\n      transition: all .15s linear;\r\n\r\n      &:hover {\r\n        background: #ee647e;\r\n      }\r\n\r\n      > svg {\r\n        width: 1.4rem;\r\n        height: 1.4rem;\r\n      }\r\n\r\n      > span {\r\n        font-size: 0.9rem;\r\n        margin-left: 0.5rem;\r\n      }\r\n    }\r\n\r\n    > a {\r\n      font-size: 0.9rem;\r\n      cursor: pointer;\r\n\r\n      &:hover {\r\n        color: #ff3c00;\r\n        text-decoration: underline;\r\n\r\n        > svg {\r\n          fill: #ff3c00;\r\n        }\r\n      }\r\n\r\n      > svg {\r\n        width: 1.2rem;\r\n        height: 1.2rem;\r\n        margin-right: 0.8rem;\r\n      }\r\n    }\r\n\r\n    > ::v-deep .loading-button {\r\n      padding: 0.4rem 0.8rem;\r\n      background: #66dded;\r\n      box-shadow: 0 0 0.3rem #00000078;\r\n      color: black;\r\n\r\n      &:not(.loading):hover {\r\n        background: #62c7db;\r\n      }\r\n\r\n      &.loading {\r\n        background: gray;\r\n        color: white;\r\n      }\r\n    }\r\n  }\r\n\r\n  > .head {\r\n    flex-direction: column;\r\n    margin: 3rem 0;\r\n    width: 100%;\r\n\r\n    > .float-input {\r\n      width: 60%;\r\n\r\n      ::v-deep input {\r\n        text-align: center !important;\r\n      }\r\n\r\n      &.summary {\r\n        margin-top: 3rem;\r\n        width: 70%;\r\n      }\r\n    }\r\n  }\r\n\r\n  > .info {\r\n    width: 100%;\r\n    justify-content: space-around;\r\n    align-items: stretch;\r\n\r\n    > .cover {\r\n      margin: 0 2rem;\r\n      border-radius: 0.8rem;\r\n      padding: 0.5rem;\r\n      justify-content: space-around;\r\n      flex-direction: column;\r\n      border: 1px solid gray;\r\n      box-shadow: 0 0 0.8rem rgba(0, 0, 0, 0.15);\r\n\r\n      > img {\r\n        width: 20rem;\r\n        height: 15rem;\r\n        object-fit: contain;\r\n        border-radius: inherit;\r\n      }\r\n\r\n      > label {\r\n        display: flex;\r\n        align-items: center;\r\n        margin: 1rem 0 0.5rem 0;\r\n\r\n        > span {\r\n          font-size: 0.88rem;\r\n          margin-right: 0.5rem;\r\n        }\r\n\r\n        > input {\r\n          border: 1px solid gray;\r\n          padding: 0.15rem;\r\n          font-size: 0.95rem;\r\n        }\r\n      }\r\n    }\r\n\r\n    > .tags-time {\r\n      flex-direction: column;\r\n      flex-grow: 1;\r\n\r\n      > .tags {\r\n        align-content: start;\r\n        flex-wrap: wrap;\r\n\r\n        > .tag-icon {\r\n          margin-right: 2rem;\r\n          display: flex;\r\n          align-items: center;\r\n\r\n          > svg {\r\n            width: 2.6rem;\r\n            height: 2.6rem;\r\n          }\r\n        }\r\n\r\n        > div {\r\n          margin: 1rem 0.8rem;\r\n          border-radius: 0.2rem;\r\n          justify-content: center;\r\n          position: relative;\r\n          height: 2.5rem;\r\n          box-shadow: 0 0 0.6rem rgba(0, 0, 0, 0.26);\r\n\r\n          > input {\r\n            font-size: 0.96rem;\r\n            width: 12rem;\r\n            height: 100%;\r\n            border-radius: inherit;\r\n            text-align: center;\r\n            background: white;\r\n            color: black;\r\n            border: 1px solid gray;\r\n            transition: all .2s linear;\r\n\r\n            &:disabled {\r\n              color: white;\r\n              width: 6rem;\r\n              background: #3e41ff;\r\n              border-color: transparent;\r\n            }\r\n          }\r\n\r\n          > div {\r\n            display: none;\r\n            position: absolute;\r\n            border-radius: inherit;\r\n            left: 0;\r\n            top: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            justify-content: space-around;\r\n            background: rgba(0, 0, 0, 0.4);\r\n\r\n            > span {\r\n              cursor: pointer;\r\n              padding: 0.15rem 0.4rem;\r\n              border-radius: 0.2rem;\r\n\r\n              &:hover {\r\n                background: rgba(255, 255, 255, 0.31);\r\n              }\r\n\r\n              > svg {\r\n                width: 1.4rem;\r\n                height: 1.4rem;\r\n              }\r\n            }\r\n          }\r\n\r\n          &:not(.editing):hover {\r\n            > div {\r\n              display: flex;\r\n            }\r\n          }\r\n        }\r\n\r\n        > .add {\r\n          cursor: pointer;\r\n          padding: 0.5rem;\r\n          border-radius: 50%;\r\n          background: #ffc722;\r\n          justify-content: center;\r\n          display: flex;\r\n          align-items: center;\r\n          margin-left: 1rem;\r\n          box-shadow: 0 0 0.4rem rgba(0, 0, 0, 0.3);\r\n\r\n          &:hover {\r\n            background: #eab61f;\r\n          }\r\n\r\n          > svg {\r\n            width: 1.2rem;\r\n            height: 1.2rem;\r\n            fill: white;\r\n          }\r\n        }\r\n      }\r\n\r\n      > .time {\r\n        width: 100%;\r\n        height: 3rem;\r\n        justify-content: space-around;\r\n        margin-top: auto;\r\n\r\n        > span {\r\n          color: #0003ff;\r\n          font-size: 0.9rem;\r\n\r\n          > span {\r\n            font-size: 0.9em;\r\n            color: black;\r\n            margin-right: 0.5rem;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  > .text {\r\n    margin: 1rem 0 0.4rem 0;\r\n    width: 99%;\r\n    max-height: 50rem;\r\n    min-height: 10rem;\r\n    align-items: stretch;\r\n    border: 1px solid #656565;\r\n\r\n    > .markdown {\r\n      align-items: stretch;\r\n      flex-shrink: 0;\r\n\r\n      > .textarea {\r\n        width: 100%;\r\n\r\n        > ::v-deep .CodeMirror {\r\n          height: 100%;\r\n          font-size: 0.9rem;\r\n        }\r\n      }\r\n    }\r\n    > ::v-deep .resizer{\r\n      background: #828282;\r\n      width: 0.3rem;\r\n      flex-shrink: 0;\r\n      &[resizing]{\r\n        background: #505050;\r\n      }\r\n    }\r\n    > .html {\r\n      overflow-y: auto;\r\n      display: block;\r\n      flex-grow: 1;\r\n\r\n      > span {\r\n        display: block;\r\n        word-break: break-all;\r\n        white-space: pre-line;\r\n        width: 100%;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MdDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MdDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MdDetail.vue?vue&type=template&id=9448e2fa&scoped=true&\"\nimport script from \"./MdDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./MdDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MdDetail.vue?vue&type=style&index=0&id=9448e2fa&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9448e2fa\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}